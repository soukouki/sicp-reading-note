
(define % remainder)

; 正規順序評価の例

(gcd 206 40)

(if (= 40 0)
  206
  (gcd 40 (% 206 40)))

(gcd 40 (% 206 40))

(if (= (% 206 40) 0) ; 1
  40
  (gcd (% 206 40) (% 40 (% 206 40))))

(gcd (% 206 40) (% 40 (% 206 40)))

(if (= (% 40 (% 206 40)) 0) ; 1+2 = 3
  (% 206 40)
  (gcd (% 40 (% 206 40)) (% (% 206 40) (% 40 (% 206 40)))))

(gcd (% 40 (% 206 40)) (% (% 206 40) (% 40 (% 206 40))))

(if (= (% (% 206 40) (% 40 (% 206 40)))) 0) ; 3+4 = 7
  (% 40 (% 206 40))
  (gcd (% (% 206 40) (% 40 (% 206 40))) (% (% 40 (% 206 40)) (% (% 206 40) (% 40 (% 206 40)))))

(gcd (% (% 206 40) (% 40 (% 206 40))) (% (% 40 (% 206 40)) (% (% 206 40) (% 40 (% 206 40)))))

(if (= (% (% 40 (% 206 40)) (% (% 206 40) (% 40 (% 206 40)))) 0) ; 7+7 = 14
  (% (% 206 40) (% 40 (% 206 40)))
  (--))

(% (% 206 40) (% 40 (% 206 40))) ; 14+4 = 18

; remainder関数は18回呼び出される

; 適用順序評価の例

(gcd 206 40)
(if (= 40 0) 206 (gcd 40 (% 206 40)))
(gcd 40 (% 206 40)) ; 1
(gcd 40 6)
(if (= 6 0) 40 (gcd 6 (% 40 6)))
(gcd 6 (% 40 6)) ; 2
(gcd 6 4)
(if (= 4 0) 4 (gcd 4 (% 6 4)))
(gcd 4 (% 6 4)) ; 3
(gcd 4 2)
(if (= 2 0) 2 (gcd 2 (% 4 2)))
(gcd 2 (% 4 2)) ; 4
(gcd 2 0)
(if (= 0 0) 2 (gcd 0 (% 2 0)))
2

; remainder関数は4回呼び出される

; プロセス計算量も空間計算量も大きく違う感じ
